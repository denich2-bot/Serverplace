Ниже — полноценное ТЗ на **«СерверПлейс»**: маркетплейс облачных серверов в РФ, где пользователь задаёт параметры, а система показывает **все доступные варианты** у всех провайдеров (из вашего списка) с ценами, фильтрами, отзывами и заявкой в 2 шага.

**Демо-данные (провайдеры + тарифы + отзывы + статьи + FAQ) уже сгенерировал архивом для сидирования БД:**
[Скачать demo data (zip)](sandbox:/mnt/data/serverplace_demo_data.zip)
В архиве: `providers.json` (все провайдеры из вложения), `offers.json` (1120 тарифов), `reviews.json` (836 отзывов), `articles.json` (24 статьи), `faq.json`, `regions.json`, `seed_bundle.json`. 

---

## 0) Вводные и цель продукта

**Продукт:** «СерверПлейс» (домен: `https://serverplace.su`) — витрина-маркетплейс сравнения облачных серверов/ VPS/VDS в РФ:

1. пользователь собирает конфигурацию,
2. получает результаты по всем провайдерам,
3. выбирает провайдера/тариф → оставляет заявку,
4. провайдер связывается с пользователем.

**Покупка не на Serverplace:** мы передаём лид, не биллим пользователя внутри сервиса (MVP).

---

## 1) Обязательные требования (то, что нельзя “забыть”)

1. **Параметры конфигурации**: **все параметры как в калькуляторе Selectel** (блок VPS/VDS-калькуляции и доп.услуги) + добавить:

   * **Пропускная способность канала (Mbps/Gbps)**
   * **Лимит трафика в месяц (GB/TB)**
   * **Тип процессора** (например: Shared / Dedicated / HighFreq)
   * **Марка/бренд процессора** (Intel/AMD) + модель (например Xeon/EPYC)
   * **Фильтр “Бесплатный тест”** (да/нет + дни).
     Доп.услуги, которые обязаны быть в параметрах (по калькуляторной логике): балансировщик, резервное копирование (объём/кол-во копий), интернет-трафик (доп.), хранение образов, регион/пул, период тарификации. ([selectel.ru][1])

2. **Демо-данные** должны делать сервис визуально “живым”: много тарифов, много отзывов, блог, FAQ.

3. **Цены в демо:** взять средние по РФ и сделать **–20%** как “акция”, показывать зачёркнутую “обычную” цену и новую “по акции”.

   * Ориентиры “снизу рынка” (для реалистичности диапазона): у некоторых провайдеров встречаются VPS от ~267 ₽/мес (Yandex Cloud) ([yandex.cloud][2]) и от ~240 ₽/мес (RuVDS). ([ruvds.com][3])
   * Пример “середины” по простым конфигам: 2 vCPU / 4 GB / 40 GB около ~1020 ₽/мес в подборках/таблицах тарифов. ([HostingHUB.ru][4])
     В демо-пакете цены уже рассчитаны синтетически от “среднерыночной” модели и умножены на коэффициенты провайдеров; поверх этого применена **скидка 20%**.

4. **Заявка:** после выбора тарифа/провайдера:

   * Шаг 1: спросить **email**
   * Шаг 2: спросить **телефон**
   * Кнопка: **«Заказать»**
   * После отправки: текст **«Заявка отправлена — ожидайте. Провайдер с вами свяжется.»**
   * При успешной отправке обязательно уходит email на: **[denich2@gmail.com](mailto:denich2@gmail.com)** (уведомление о лиде).

5. **SSL обязателен:** развернуть TLS-сертификат на `serverplace.su`, включить редирект HTTP→HTTPS.

6. **Доступ к серверу (как передано заказчиком):**
   IP: `193.233.248.11`
   Пароль: `w3LeilKyYMV7`
   (Использовать только для деплоя, не коммитить никуда.)

---

## 2) Информационная архитектура (разделы сайта)

### Публичная часть

1. **Главная** `/`
2. **Каталог серверов (конфигуратор + результаты)** `/servers`
3. **Страница провайдера** `/providers/{slug}`
4. **Каталог провайдеров** `/providers`
5. **Страница тарифа/предложения** `/offers/{id}` (SEO-страница)
6. **Сравнение** `/compare`
7. **Отзывы** `/reviews`
8. **Блог / база знаний** `/blog` и `/blog/{slug}`
9. **FAQ** `/faq`
10. **Контакты** `/contacts`

### Админка

1. **Дашборд** `/admin`
2. **Провайдеры** `/admin/providers`
3. **Тарифы/офферы** `/admin/offers`
4. **Отзывы** `/admin/reviews`
5. **Заявки (лиды)** `/admin/leads`
6. **Контент (блог/FAQ/страницы)** `/admin/content`
7. **Настройки (промо/SEO/почта)** `/admin/settings`

---

## 3) UX-логика: как пользователь “собирает сервер” и получает результаты

### 3.1 Конфигуратор (левая панель на `/servers`)

**Принцип:** пользователь задаёт *минимальные требования*, результаты показывают предложения, которые *не хуже* (>=) по ключевым ресурсам.

#### Группы параметров (обязательные)

**A) Вычисления**

* vCPU (слайдер/число): 1…64
* RAM (ГБ): 1…256
* Тип CPU: `Shared | Dedicated | HighFreq`
* Бренд CPU: `Intel | AMD | Любой`
* Модель CPU (опционально, выпадающий список в зависимости от бренда)

**B) Диски**

* Тип системного диска: `HDD | SSD | SSD NVMe`
* Размер системного диска (ГБ)
* Дополнительные диски (0..N): для каждого

  * тип диска
  * размер (ГБ)
  * количество (шт)

**C) Сеть**

* Пропускная способность канала (Mbps/Gbps): 100 / 200 / 300 / 1000 / 3000 (значения расширяемые)
* Лимит трафика в месяц (TB): 1 / 2 / 3 / 5 / 8 / 10 / 20 (значения расширяемые)
* IPv4: `нужен | не нужен`
* DDoS-защита: `нужна | не нужна` (как фильтр-фича)

**D) География и платформа**

* Регион (мультиселект): Москва / СПб / … (из `regions.json`)
* Пул (опционально): `ru-…` (если провайдер поддерживает)
* Виртуализация (фильтр): `KVM | OpenStack | VMware | Любая`

**E) Тарификация**

* Период: `час | день | месяц` (в MVP можно считать и показывать “месяц” как основной)
* Валюта: RUB (фикс)

**F) Доп.услуги (как в калькуляторной логике)**

* Балансировщик нагрузки: `да/нет`
* Резервное копирование:

  * объём диска (ГБ)
  * количество копий
* Дополнительный интернет-трафик:

  * объём (TB)
* Хранение образов:

  * объём (ГБ)

Тарифная логика по трафику/доп-трафику должна поддерживать цену “за ГБ” (в источниках встречается уровень ~0,783 ₽/ГБ и канал 3 Гбит/с как пример параметров расчёта доп.трафика). ([selectel.ru][1])

**G) Бесплатный тест (важно!)**

* Бесплатный тест: `да/нет`
* (в карточке результата показывать “N дней” и условия)

---

## 4) Каталог `/servers`: экран результатов (что именно отображать)

### 4.1 Хедер результатов

* Плашка “Найдено: X предложений от Y провайдеров”
* Сортировка:

  * **Лучшее совпадение** (по скорингу)
  * Дешевле (по промо-цене)
  * Выше рейтинг
  * Больше трафика
  * Выше канал
  * С бесплатным тестом

### 4.2 Карточка предложения (Offer Card)

Показывать строго:

* Лого/аватар провайдера + название
* Название тарифа
* vCPU / RAM
* Диск (тип + ГБ)
* CPU: тип + бренд + модель (например “HighFreq / Intel Xeon Gold …”)
* Сеть: канал + лимит трафика
* Регион(ы)
* Флажки: IPv4, DDoS, SLA
* **Цена:**

  * зачёркнутая “обычная”
  * крупная “по акции –20%”
  * бейдж “Акция −20% до {дата}”
* Рейтинг + кол-во отзывов
* Бейдж **“Бесплатный тест: N дней”** (если есть)
* Кнопки:

  * **Сравнить** (добавляет в compare)
  * **Подробнее**
  * **Заказать** (открывает 2-шаговую форму)

### 4.3 “Подробнее” (Offer page `/offers/{id}`)

* Полная раскладка параметров
* “Что входит” (IPv6, поддержка и т.п. — демо-текст)
* Условия бесплатного теста
* Отзывы по провайдеру (первые 5 + ссылка на все)
* FAQ по провайдеру
* CTA “Заказать”

---

## 5) Каталог провайдеров `/providers`

### 5.1 Список провайдеров

* Поиск по названию
* Фильтры:

  * есть бесплатный тест
  * регионы
  * бренд CPU (Intel/AMD)
  * рейтинг (4.0+ / 4.5+)
* Карточка провайдера:

  * лого, название, сайт
  * рейтинг, кол-во отзывов
  * регионы
  * “от {min_price} ₽/мес по акции”
  * бейдж “Бесплатный тест”
  * кнопка “Смотреть предложения”

### 5.2 Страница провайдера `/providers/{slug}`

Блоки:

1. Заголовок + рейтинг + кнопка “Перейти на сайт” (в новой вкладке)
2. “Коротко о провайдере” (демо)
3. “Регионы и пулы”
4. “Лучшие предложения” (таблица/карточки)
5. “Отзывы” (пагинация)
6. “Вопрос-ответ”
7. CTA “Подобрать сервер”

---

## 6) Сравнение `/compare`

* До 6 предложений
* Таблица сравнения:

  * цена обычная / цена по акции
  * vCPU/RAM
  * диск
  * CPU тип/бренд/модель
  * канал/трафик
  * SLA
  * бесплатный тест
  * рейтинг
* Кнопки “Заказать” у каждого

---

## 7) Отзывы `/reviews`

### 7.1 Каталог отзывов

* Фильтр по провайдеру
* Фильтр “верифицированные”
* Сортировка: новые/полезные/высокий рейтинг
* Карточка отзыва:

  * имя + роль
  * рейтинг
  * “плюсы/минусы”
  * кейс использования
  * лайки

### 7.2 Добавление отзыва (MVP опционально)

Если делаем — только после модерации в админке.

---

## 8) Лид-флоу “Заказать” (обязательно ровно как вы просили)

### 8.1 UI

Кнопка **«Заказать»** на карточке → модалка/страница-stepper:

**Шаг 1. Email**

* Поле email (валидировать)
* Кнопка “Продолжить”

**Шаг 2. Телефон**

* Маска: `+7 (___) ___-__-__`
* Кнопка **«Заказать»**

**Успех**

* Сообщение: **«Заявка отправлена — ожидайте. Провайдер с вами свяжется.»**
* Кнопки:

  * “Вернуться к подбору”
  * “Скопировать конфигурацию/ссылку”

### 8.2 Что сохраняем в лид (обязательно)

* provider_id
* offer_id
* snapshot конфигурации (все параметры из конфигуратора)
* email
* phone
* utm_* (если есть)
* page_url, referrer, user_agent
* created_at
* status: `new | sent | in_work | closed`

### 8.3 Email-уведомление (обязательно)

При создании лида отправляем письмо на **[denich2@gmail.com](mailto:denich2@gmail.com)** со структурой:

Тема: `Serverplace: новая заявка ({provider_name})`
Тело:

* Провайдер
* Тариф
* Цена по акции
* Конфигурация (vCPU/RAM/диски/CPU/сеть/регион/допы)
* Контакты клиента: email, телефон
* Тех: дата, UTM, URL страницы

**Плюс:** автоответ пользователю (опционально) “Мы получили заявку…”.

### 8.4 Антиспам (чтобы не словить “заявки от роботов”)

* rate limit: не более 3 лидов / 10 минут / IP
* honeypot hidden field
* логирование отказов

---

## 9) Данные и расчёт цен (MVP-модель)

### 9.1 Нормализация параметров

У разных провайдеров по-разному называются “линии”, “серии”, “пулы”, “тип CPU”. Поэтому в БД храним **нормализованные поля**, а в UI показываем “человеческие” метки.

### 9.2 Матчинг результатов

Правило включения оффера в выдачу:

* vCPU >= запрошенного
* RAM >= запрошенного
* disk >= запрошенного (по системному)
* network.bandwidth_mbps >= запрошенного (если задано)
* traffic_limit_tb >= запрошенного (если задано)
* если выбран CPU бренд — должен совпадать
* если “бесплатный тест = да” — только офферы/провайдеры с trial

### 9.3 Скоринг “лучшее совпадение”

Формула (регулируется в настройках):

* price_score (40%)
* rating_score (20%)
* trial_score (10%)
* region_match (10%)
* network_score (10%)
* cpu_type_match (10%)

---

## 10) Модель данных (БД)

### 10.1 Таблицы

**providers**

* id (pk)
* name, slug, url
* aliases (jsonb)
* rating, rating_count
* has_free_trial, trial_days
* regions (jsonb array)
* cpu_brands (jsonb array)
* promo_label, promo_discount_percent, promo_until
* about_short
* created_at, updated_at

**offers**

* id (pk)
* provider_id (fk)
* name
* currency
* market_price_month, promo_price_month
* promo_label
* resources (jsonb):

  * vcpu, ram_gb
  * cpu: type, brand, line, model
  * disks: [{role,type,size_gb}]
  * network: {bandwidth_mbps, traffic_limit_tb}
  * ipv4_included, ipv6_included, ddos_protection
  * sla_percent
  * virtualization
* availability (jsonb): regions[], pools[]
* free_trial (jsonb): available, days, conditions
* links (jsonb): order_url, docs_url
* updated_at

**reviews**

* id (pk)
* provider_id (fk)
* user_display_name
* user_role
* rating
* title
* pros (text[])
* cons (text[])
* use_case
* text
* verified (bool)
* likes (int)
* created_at

**leads**

* id (pk)
* provider_id (fk)
* offer_id (fk)
* config_snapshot (jsonb)
* email
* phone
* utm (jsonb)
* page_url, referrer, user_agent
* status
* created_at

**content_pages** (для блога/FAQ)

* id, type (`article|faq|page`)
* slug
* title
* excerpt
* content_md
* tags
* published_at

---

## 11) API (REST, MVP)

### Публичное

* `GET /api/regions`
* `GET /api/providers?query=&region=&trial=&min_rating=`
* `GET /api/providers/{slug}`
* `GET /api/offers/search` (основной)

  * query params: все параметры конфигуратора
* `GET /api/offers/{id}`
* `GET /api/reviews?provider_id=&sort=&page=`
* `GET /api/blog`
* `GET /api/blog/{slug}`
* `POST /api/leads`

  * body: provider_id, offer_id, config_snapshot, email, phone, utm…

### Админское (под auth)

* CRUD providers/offers/reviews/content
* `GET /api/admin/leads?status=&date_from=&date_to=`
* `PATCH /api/admin/leads/{id}` (смена статуса)

---

## 12) Админка: что должно уметь (иначе это просто красивый каталог без управления)

1. **Провайдеры**

* список, поиск, редактирование
* поля trial/регионы/коэф-цен/пromo до даты
* загрузка лого (опционально)

2. **Офферы**

* список, фильтр по провайдеру
* импорт из JSON (кнопка “Импортировать offers.json”)
* ручное создание/редактирование

3. **Отзывы**

* список, модерировать (если включим добавление отзывов пользователями)

4. **Лиды**

* список лидов
* просмотр лида (все параметры)
* статусы
* экспорт CSV

5. **Почта**

* настройки SMTP
* тест-письмо
* шаблоны email

---

## 13) Демо-данные: что и как залить (готово)

**Архив демо-данных:** [serverplace_demo_data.zip](sandbox:/mnt/data/serverplace_demo_data.zip)

* `providers.json` — все провайдеры из вашего списка (включая алиасы; например eServer / eServer RU сведены в один провайдер с `aliases`). 
* `offers.json` — 1120 предложений (8 на провайдера), цены: “обычная” и “акционная −20%”
* `reviews.json` — 836 отзывов (4–8 на провайдера)
* `articles.json` — 24 статьи
* `faq.json` — базовый FAQ
* `regions.json` — регионы РФ (демо)
* `seed_bunлный бандл

**Требование к разработчикам:** сделать сидер, который:

* читает эти JSON,
* кладёт в БД,
* при старте проекта в dev/stage автозаполняет витрину.

---

## 14) Нефункциональные требования

* Производительность поиска: p95 < 300 мс на 10k офферов (в MVP хватит Postgres + индексы + кеш).
* SSR/SEO: страницы `/providers/*` и `/offers/*` должны быть индексируемыми.
* Логи: события поиска, клики “Заказать”, успешные лиды.
* Безопасность:

  * защита админки (JWT/Session)
  * rate limit на `POST /api/leads`
  * секреты только в env

---

## 15) Деплой и SSL (обязательный чек-лист)

1. Домен: **serverplace.su**
2. TLS/SSL:

   * Выпустить сертификат (например через Let's Encrypt)
   * Включить редирект `http://` → `https://`
3. Reverse proxy: Nginx (или аналог)
4. Env:

   * SMTP_* (для писем)
   * ADMIN_EMAIL=`denich2@gmail.com`
5. Мониторинг: хотя бы uptime + error logs

---

## 16) Критерии приёмки (Acceptance Criteria)

### Поиск/выдача

* При изменении любого параметра конфигуратора выдача обновляется.
* Фильтр “Бесплатный тест” скрывает все офферы без trial.
* Сортировка “Дешевле” сортирует по promo_price_month.

### Оффер/провайдер

* Страница провайдера показывает офферы и отзывы.
* Карточка оффера показывает: CPU тип/бренд/модель, канал, трафик, цену обычную и по акции, бейдж “−20%”.

### Лид-флоу

* Кнопка “Заказать” → сначала email → потом телефон → отправка.
* После отправки показывается текст успеха (строго ваш).
* На `denich2@gmail.com` приходит письмо с деталями заявки.

### SSL

* Сайт открывается только по HTTPS, HTTP редиректит на HTTPS.

---

## 17) Что делать разработке “с понедельника, без вопросов”

1. Поднять репозиторий + базовую структуру страниц (sitemap выше).
2. Подключить БД (Postgres), миграции под таблицы.
3. Сделать сидер и залить demo data из архива.
4. Реализовать `/servers` (конфигуратор + выдача).
5. Реализовать лид-флоу и email-уведомление.
6. Админка: минимум “Лиды/Провайдеры/Офферы”.
7. Деплой на `193.233.248.11` + SSL на `serverplace.su`.

---

### Примечание по источнику “параметры как у Selectel”

Мы берём структуру параметров и доп.услуг из калькуляторной логики VPS/VDS: ядра/память/диски + блоки “Балансировщик / Бэкапы / Интернет-трафик / Хранение образов / Регион-пул / Период”. ([selectel.ru][1])
Если захотите “один-в-один” повторить **весь** мульти-калькулятор (GPU, DBaaS и т.д.) — это отдельный epic, но архитектура выше уже готова к расширению.

---

Если хочешь, следующим шагом я могу:

* дать **готовые макеты компонентов** (списком компонентов + состояния) под фронт,
* или сразу выдать **структуру роутов/контрактов DTO** (чтобы backend и frontend не ругались как кошка с пылесосом).

[1]: https://selectel.ru/services/cloud/servers/vps-hosting/ "Аренда VPS и VDS – виртуальные серверы в Selectel, хостинг с DDoS-защитой в России"
[2]: https://yandex.cloud/ru/prices?utm_source=chatgpt.com "Калькулятор и стоимость аренды облачных ресурсов"
[3]: https://ruvds.com/ru-rub?utm_source=chatgpt.com "RU VDS | Виртуальные серверы в аренду VDS/VPS на SSD ..."
[4]: https://hostinghub.ru/top/vds/admin?page=2&utm_source=chatgpt.com "VDS/VPS-хостинг с администрированием 2025"
