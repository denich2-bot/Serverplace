<%- include('header') %>

    <div class="container">
        <div class="page-header">
            <h1>–ü–æ–¥–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä</h1>
            <p>–ó–∞–¥–∞–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
    </div>

    <div class="container servers-layout">
        <aside class="configurator" id="configurator">
            <h3 class="configurator__title">‚öô –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä</h3>
            <div class="config-group">
                <h4>–í—ã—á–∏—Å–ª–µ–Ω–∏—è</h4>
                <div class="form-group"><label>vCPU: <strong id="vcpuVal">1</strong></label><input type="range"
                        id="cfg_vcpu" min="1" max="64" value="1" class="slider"></div>
                <div class="form-group"><label>RAM (–ì–ë): <strong id="ramVal">1</strong></label><input type="range"
                        id="cfg_ram" min="1" max="256" value="1" class="slider"></div>
                <div class="form-group"><label>–¢–∏–ø CPU</label><select id="cfg_cpu_type" class="select">
                        <option value="any">–õ—é–±–æ–π</option>
                        <option value="Shared">Shared</option>
                        <option value="Dedicated">Dedicated</option>
                        <option value="HighFreq">HighFreq</option>
                    </select></div>
                <div class="form-group"><label>–ë—Ä–µ–Ω–¥ CPU</label><select id="cfg_cpu_brand" class="select">
                        <option value="any">–õ—é–±–æ–π</option>
                        <option value="Intel">Intel</option>
                        <option value="AMD">AMD</option>
                    </select></div>
            </div>
            <div class="config-group">
                <h4>–î–∏—Å–∫–∏</h4>
                <div class="form-group"><label>–¢–∏–ø –¥–∏—Å–∫–∞</label><select id="cfg_disk_type" class="select">
                        <option value="any">–õ—é–±–æ–π</option>
                        <option value="ssd">SSD</option>
                        <option value="nvme">NVMe</option>
                        <option value="hdd">HDD</option>
                    </select></div>
                <div class="form-group"><label>–†–∞–∑–º–µ—Ä (–ì–ë): <strong id="diskVal">20</strong></label><input type="range"
                        id="cfg_disk_size" min="10" max="1000" value="20" step="10" class="slider"></div>
            </div>
            <div class="config-group">
                <h4>–°–µ—Ç—å</h4>
                <div class="form-group"><label>–ö–∞–Ω–∞–ª (Mbps)</label><select id="cfg_bandwidth" class="select">
                        <option value="">–õ—é–±–æ–π</option>
                        <option value="100">100 Mbps</option>
                        <option value="200">200 Mbps</option>
                        <option value="300">300 Mbps</option>
                        <option value="1000">1 Gbps</option>
                        <option value="3000">3 Gbps</option>
                    </select></div>
                <div class="form-group"><label>–¢—Ä–∞—Ñ–∏–∫ (TB/–º–µ—Å)</label><select id="cfg_traffic" class="select">
                        <option value="">–õ—é–±–æ–π</option>
                        <option value="1">1 TB</option>
                        <option value="2">2 TB</option>
                        <option value="5">5 TB</option>
                        <option value="10">10 TB</option>
                        <option value="20">20 TB</option>
                    </select></div>
                <div class="form-group"><label class="checkbox-label"><input type="checkbox" id="cfg_ddos">
                        DDoS-–∑–∞—â–∏—Ç–∞</label></div>
            </div>
            <div class="config-group">
                <h4>–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</h4>
                <div class="form-group"><label>–°—Ç—Ä–∞–Ω–∞</label><select id="cfg_country" class="select"
                        onchange="updateCityFilter()">
                        <option value="">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</option>
                    </select></div>
                <div class="form-group"><label>–ì–æ—Ä–æ–¥</label><select id="cfg_region" class="select">
                        <option value="">–í—Å–µ –≥–æ—Ä–æ–¥–∞</option>
                    </select></div>
                <div class="form-group"><label>–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è</label><select id="cfg_virt" class="select">
                        <option value="any">–õ—é–±–∞—è</option>
                        <option value="KVM">KVM</option>
                        <option value="OpenStack">OpenStack</option>
                        <option value="VMware">VMware</option>
                    </select></div>
            </div>
            <div class="config-group">
                <h4>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h4>
                <div class="form-group"><label class="checkbox-label"><input type="checkbox" id="cfg_trial"> –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
                        —Ç–µ—Å—Ç</label></div>
                <div class="form-group"><label class="checkbox-label"><input type="checkbox" id="cfg_ipv4" checked>
                        IPv4</label></div>
            </div>
            <button class="btn btn--primary btn--full" onclick="searchOffers()">–ù–∞–π—Ç–∏ —Å–µ—Ä–≤–µ—Ä—ã</button>
            <button class="btn btn--ghost btn--full" onclick="resetConfig()" style="margin-top:8px">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </aside>

        <div class="results" id="results">
            <div class="results__header">
                <div class="results__summary" id="resultsSummary">
                    <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ù–∞–π—Ç–∏ —Å–µ—Ä–≤–µ—Ä—ã¬ª</p>
                </div>
                <div class="results__sort">
                    <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select id="sortSelect" class="select select--sm" onchange="searchOffers()">
                        <option value="best">–õ—É—á—à–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ</option>
                        <option value="price_asc">–î–µ—à–µ–≤–ª–µ</option>
                        <option value="price_desc">–î–æ—Ä–æ–∂–µ</option>
                        <option value="rating">–í—ã—à–µ —Ä–µ–π—Ç–∏–Ω–≥</option>
                        <option value="traffic">–ë–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞</option>
                        <option value="bandwidth">–í—ã—à–µ –∫–∞–Ω–∞–ª</option>
                        <option value="trial">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç</option>
                    </select>
                </div>
            </div>
            <div id="offersList" class="offers-list">
                <div class="results__empty">
                    <p>üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</p>
                </div>
            </div>
            <div id="pagination" class="pagination"></div>
        </div>
    </div>

    <script>
        var _allRegions = <% - JSON.stringify(regions) %>;
        function initCountryFilter() {
            var countries = [];
            var seen = {};
            _allRegions.forEach(function (r) {
                if (!seen[r.country]) { seen[r.country] = true; countries.push(r.country); }
            });
            var sel = document.getElementById('cfg_country');
            countries.forEach(function (c) {
                var opt = document.createElement('option');
                opt.value = c;
                opt.textContent = c;
                sel.appendChild(opt);
            });
        }
        function updateCityFilter() {
            var country = document.getElementById('cfg_country').value;
            var citySel = document.getElementById('cfg_region');
            citySel.innerHTML = '<option value="">–í—Å–µ –≥–æ—Ä–æ–¥–∞</option>';
            var filtered = country ? _allRegions.filter(function (r) { return r.country === country; }) : _allRegions;
            filtered.forEach(function (r) {
                var opt = document.createElement('option');
                opt.value = r.id;
                opt.textContent = r.city;
                citySel.appendChild(opt);
            });
        }
        initCountryFilter();
    </script>
    <script src="/js/configurator.js?v=1.1.1"></script>

    <%- include('footer') %>